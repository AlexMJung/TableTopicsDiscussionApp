var myApp=angular.module("myApp",["ngRoute"]);myApp.config(["$routeProvider","$locationProvider",function(a,b){b.hashPrefix(""),a.when("/home",{templateUrl:"/views/templates/home.html",controller:"LoginController"}).when("/register",{templateUrl:"/views/templates/register.html",controller:"LoginController"}).when("/createSession",{templateUrl:"/views/templates/createSession.html",controller:"UserController",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/addParticipants",{templateUrl:"/views/templates/addParticipants.html",controller:"UserController",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/session",{templateUrl:"/views/templates/session.html",controller:"UserController",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).otherwise({redirectTo:"home"})}]),myApp.controller("LoginController",["$scope","$http","$location","UserService",function(a,b,c,d){a.getAllSessions=d.getAllSessions,a.getAllSessions(),a.user={username:"",password:""},a.message="",a.login=function(){""===a.user.username||""===a.user.password?a.message="Please enter your username and password":(console.log("sending to server...",a.user),b.post("/",a.user).then(function(b){b.data.username?(console.log("success: ",b.data),c.path("/createSession")):(console.log("failure: ",b),a.message="Incorrect login information")}))},a.registerUser=function(){""===a.user.username||""===a.user.password?a.message="Choose a username and password!":(console.log("sending to server...",a.user),b.post("/register",a.user).then(function(a){console.log("success"),c.path("/home")},function(b){console.log("error"),a.message="Please try again"}))}}]),myApp.controller("UserController",["$scope","$http","$location","UserService",function(a,b,c,d){function e(b){console.log("chooseSession object",b),a.sessionObject=b,b={}}function f(b){if(""!==b){var c=angular.copy(b);a.sessionObject.questionsArray.push(c),a.newQuestion=""}}function g(b){a.sessionObject.questionsArray.splice(b,1)}function h(b){if(""!==b){var c=angular.copy(b);a.sessionObject.participantsArray.push(c),a.newParticipant="",console.log("$scope.sessionObject.participantsArray",a.sessionObject.participantsArray)}}function i(b){a.sessionObject.participantsArray.splice(b,1)}function j(){console.log("choosing a question, then choosing a name")}a.userObject=d.userObject,a.logout=d.logout,a.currentSessionObject=d.currentSessionObject,a.createSession=d.createSession,a.saveParticipants=d.saveParticipants,a.allSessions=d.allSessions,a.getAllSessions=d.getAllSessions,console.log("allSessions object in controller",a.allSessions);var k={},l=[],m=[];k.sessionName="",k.sessionTheme="",k.questionsArray=l,k.participantsArray=m,a.sessionObject=k,a.newQuestion="",a.chooseSession=e,a.addQuestion=f,a.deleteQuestion=g,a.newParticipant="",a.addParticipant=h,a.deleteParticipant=i,a.chooseNext=j}]),myApp.factory("UserService",["$http","$location",function(a,b){function c(){a.get("/createSession/getAll").then(function(a){console.log("getAllSessions response",a),j.data=a.data})}function d(c){a.post("/createSession/addSession",c).then(function(a){i.data=a.data,b.path("/addParticipants")})}function e(c,d){var e={};e.id=c,e.participantsArray=d.participantsArray,console.log("putObject",e),a.put("/createSession/saveParticipants",e).then(function(a){console.log("response",a),i.data=a.data,console.log("currentSessionObject.data",i.data),b.path("/session")})}function f(){a.get("/user").then(function(a){a.data.username?(h.userName=a.data.username,console.log("User Data: ",h.userName)):b.path("/home")})}function g(){a.get("/user/logout").then(function(a){console.log("logged out"),b.path("/home")})}console.log("User Service Loaded");var h={},i={},j={};return c(),{userObject:h,currentSessionObject:i,allSessions:j,getAllSessions:c,createSession:d,saveParticipants:e,getuser:f,logout:g}}]);